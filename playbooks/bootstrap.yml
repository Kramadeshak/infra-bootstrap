- name: Bootstrap machine
  hosts: all
  become: true

  pre_tasks:
    - name: Load vars for each machine type
      include_vars:
        file: "group_vars/{{ item }}.yml"
      loop: "{{ machine_types | default([]) }}"

  roles:
    - common
    - role: zsh
      when: zsh_enabled | default(false)
    - role: editor
      when: editor_enabled | default(false)
    - role: tmux
      when: tmux_enabled | default(false)
    - role: fonts
      when: fonts_enabled | default(false)
    - dotfiles
